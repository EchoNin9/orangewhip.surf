---
import Layout from '../../components/Layout.astro';
import Section from '../../components/Section.astro';
import { getCollection } from 'astro:content';

export async function getStaticPaths() {
  const press = await getCollection('press');
  return press.map(item => ({
    params: { slug: item.slug },
    props: { item },
  }));
}

const { item } = Astro.props;
const pressDate = new Date(item.data.date);
const formattedDate = pressDate.toLocaleDateString('en-US', {
  year: 'numeric',
  month: 'long',
  day: 'numeric'
});
---

<Layout title={`${item.data.title} — Orange Whip`} description={item.body.slice(0, 160)}>
  <Section>
    <div class="max-w-4xl mx-auto">
      <!-- Press Header -->
      <div class="text-center mb-8">
        <h1 class="text-4xl font-bold text-gray-900 mb-4">{item.data.title}</h1>
        <p class="text-lg text-gray-600 mb-4">{formattedDate}</p>
        {item.data.tags.length > 0 && (
          <div class="flex justify-center flex-wrap gap-2">
            {item.data.tags.map((tag: string) => (
              <span class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-orange-100 text-orange-800">
                {tag}
              </span>
            ))}
          </div>
        )}
      </div>

      <!-- Hero Image -->
      {item.data.heroImage && (
        <div class="mb-8">
          <img 
            src={item.data.heroImage} 
            alt={item.data.title}
            class="w-full max-w-3xl mx-auto rounded-lg shadow-lg"
          />
        </div>
      )}

      <!-- Press Content -->
      <div class="prose prose-lg max-w-none">
        <div set:html={item.body} />
      </div>

      <!-- Back to Press -->
      <div class="text-center mt-12">
        <a href="/press" class="inline-flex items-center text-orange-600 hover:text-orange-700 font-medium">
          ← Back to Press
        </a>
      </div>
    </div>
  </Section>
</Layout>
